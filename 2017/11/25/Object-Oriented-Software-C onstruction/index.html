<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>面向对象软件构造 | Thpffcj的树洞</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Hexo">
    <meta name="author" content="John Doe">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close"/>
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            <li>
                <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/" target="_BLANK" class="animsition-link">AAA</a></li>
                    
                        <li><a href="/atom.xml" target="_BLANK" class="animsition-link">BBB</a></li>
                    
                </ul>
            </li>
            
            
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://domain.com/" class="animsition-link">Name</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"/> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">Thpffcj</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->


      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2017-11-25T09:46:52.000Z" itemprop="datePublished">
          2017-11-25
      </time>
    
    
    | 
    <a href='/tags/杂记/'>杂记</a>
    
    
</span>
                <h1>面向对象软件构造</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h2 id="面向对象设计原则概述"><a href="#面向对象设计原则概述" class="headerlink" title="面向对象设计原则概述"></a>面向对象设计原则概述</h2><p>常用的面向对象设计原则包括7个，这些原则并不是孤立存在的，它们相互依赖，相互补充。</p>
<ul>
<li>单一职责原则(Single Responsibility Principle, SRP)：类的职责要单一，不能将太多的职责放在一个类</li>
<li>开闭原则(Open-Closed Principle, OCP)：软件实体对扩展是开放的，但对修改是关闭的，即在不修改一个软件实体的基础上去扩展其功能</li>
<li>里氏代换原则(Liskov Substitution Principle, LSP)：在软件系统中，一个可以接受基类对象的地方必然可以接受一个子类对象</li>
<li>依赖倒转原则(Dependency Inversion Principle, DIP)：要针对抽象层编程，而不要针对具体类编程</li>
<li>接口隔离原则(Interface Segregation Principle, ISP)：使用多个专门的接⼜来取代一个统一的接口</li>
<li>合成复用原则(Composite Reuse Principle, CRP)：在系统中应该尽量多使用组合和聚合关联关系，尽量少使用甚⾄不使⽤继承关系</li>
<li>迪⽶特法则(Law of Demeter, LoD)：一个软件实体对其他实体的引⽤越少越好，或者说如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用，而是通过引入一个第三者发生间接</li>
</ul>
<h2 id="单一职责原则"><a href="#单一职责原则" class="headerlink" title="单一职责原则"></a>单一职责原则</h2><h3 id="1-单一职责原则的定义"><a href="#1-单一职责原则的定义" class="headerlink" title="1. 单一职责原则的定义"></a>1. 单一职责原则的定义</h3><ul>
<li>一个对象应该只包含单一的职责，并且该职责被完整地封装在一个类中。</li>
<li>就一个类而言，应该仅有一个引起它变化的原因。</li>
</ul>
<h3 id="2-单一职责原则分析"><a href="#2-单一职责原则分析" class="headerlink" title="2. 单一职责原则分析"></a>2. 单一职责原则分析</h3><ul>
<li>一个类(或者大到模块，小到方法)承担的职责越多，它被复用的可能性越小，而且如果一个类承担的职责过多，就相当于将这些职责耦合在一起，当其中一个职责变化时，可能会影响其他职责的运作。</li>
<li>类的职责主要包括两个方面：数据职责和行为职责，数据职责通过属性来体现，而行为职责通过其方法来体现。</li>
<li>单一职责原则是实现高内聚，低耦合的指导方针，在很多代码重构手法中都能找到它的存在，它是最简单但又最难运用的原则，需要设计人员发现类的不同职责并将其分离，而发现类的多重职责需要设计人员具有较强的分析设计能力和相关重构经验。</li>
</ul>
<h3 id="3-单一原则实例"><a href="#3-单一原则实例" class="headerlink" title="3. 单一原则实例"></a>3. 单一原则实例</h3><ul>
<li>实例说明：某基于Java的C/S系统的”登录功能”通过如下登录类(Login)实现：</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>现使用单一职责原则对其进行重构</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="开闭原则"><a href="#开闭原则" class="headerlink" title="开闭原则"></a>开闭原则</h2><h3 id="1-开闭原则定义"><a href="#1-开闭原则定义" class="headerlink" title="1. 开闭原则定义"></a>1. 开闭原则定义</h3><ul>
<li>一个软件实体应当对扩展开放，对修改关闭。也就是说在设计一个模块的时候，应当使这个模块可以在不被修改的前提下被扩展，即实现在不修改源代码的情况下改变这个模块的行为。</li>
</ul>
<h3 id="2-开闭原则分析"><a href="#2-开闭原则分析" class="headerlink" title="2. 开闭原则分析"></a>2. 开闭原则分析</h3><ul>
<li>在开闭原则的定义中，软件实体可以指一个软件模块，一个由多个类组成的局部结构或一个独立的类。</li>
<li>抽象话是开闭原则的关键</li>
<li>开闭原则还可以通过一个更加具体的”对可变性封装原则”来描述，对可变性封装原则(Principle of Encapsulation of Variation, EVP)要求找到系统的可变因素并将其封装起来。</li>
</ul>
<h3 id="3-开闭原则实例"><a href="#3-开闭原则实例" class="headerlink" title="3. 开闭原则实例"></a>3. 开闭原则实例</h3><ul>
<li>实例说明：某图形界面系统提供了各种不同形状的按钮，客户端代码可针对这些按钮进行编程，用户可能会改变需求要求使用不同的按钮，原始设计方案如图所示：</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>现对该系统进行重构，使之满足开闭原则的要求。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="里氏替换原则"><a href="#里氏替换原则" class="headerlink" title="里氏替换原则"></a>里氏替换原则</h2><h3 id="1-里氏替换原则定义"><a href="#1-里氏替换原则定义" class="headerlink" title="1. 里氏替换原则定义"></a>1. 里氏替换原则定义</h3><ul>
<li>里氏替换原则有两种定义方式，第一种定义方式相对严格，其定义如下：如果每一个类型为S的对象o1，都有类型为T的对象o2，使得以T定义的所有程序P在所有的对象o1替换成o2时，程序P的行为没有变化，那么类型S是类型T的子类型。</li>
<li>第二种更容易理解的定义方式如下：所有引用基类(父类)的地方必须能透明地使用其子类的对象。</li>
</ul>
<h3 id="2-里氏替换原则分析"><a href="#2-里氏替换原则分析" class="headerlink" title="2. 里氏替换原则分析"></a>2. 里氏替换原则分析</h3><ul>
<li>里氏替换原则可以通俗表述为：在软件中如果能够使用基类对象，那么一定能够使用其子类对象。把基类都替换成它的子类，程序将不会产生任何错误和异常，反过来则不成立，如果一个软件使用的是一个类的子类的话，那么它不一定能够使用基类。</li>
<li>里氏替换原则是实现开闭原则的重要方式之一，由于使用基类对象的地方都可以使用子类对象，因此在程序中尽量使用基类类型来对对象进行定义，在运行时再确定其子类类型，用子类对象来替换父类对象。</li>
</ul>
<h3 id="3-里氏替换原则实例"><a href="#3-里氏替换原则实例" class="headerlink" title="3. 里氏替换原则实例"></a>3. 里氏替换原则实例</h3><ul>
<li>某系统需要实现对重要数据(如用户密码)的加密处理，在数据操作类(DataOperator)中需要调用加密类中定义的加密算法，系统提供了两个不同的加密类，CipherA和CipeherB，它们实现不同的加密方法，在DataOperator中可以选择其中的一个实现加密操作，如图所示：</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>现对该系统进行重构，使之满足里氏替换原则的要求。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="依赖倒转原则"><a href="#依赖倒转原则" class="headerlink" title="依赖倒转原则"></a>依赖倒转原则</h2><h3 id="1-依赖倒转原则定义"><a href="#1-依赖倒转原则定义" class="headerlink" title="1. 依赖倒转原则定义"></a>1. 依赖倒转原则定义</h3><ul>
<li>依赖倒转原则的定义如下：高层模块不应该依赖于底层模块，它们都应该依赖抽象。抽象不应该依赖于细节，细节应该依赖于抽象。</li>
<li>另一种表述为：要针对接口编程，不要针对实现编程。</li>
</ul>
<h3 id="2-依赖倒转原则分析"><a href="#2-依赖倒转原则分析" class="headerlink" title="2. 依赖倒转原则分析"></a>2. 依赖倒转原则分析</h3><ul>
<li>简单来说，依赖倒转原则就是指：代码要依赖于抽象的类，而不要依赖于具体的类。要针对接口或抽象类编程，而不要针对具体类编程。</li>
<li>实现开闭原则的关键是抽象化，并且从抽象化导出具体化实现，如果说开闭原则是面向对象设计的目标的话，那么依赖倒转原则就是面向对象设计的主要手段。</li>
<li>依赖倒转原则的常用实现方式之一是在代码中使用抽象类，而将具体类放在配置文件中。<ul>
<li>将抽象放进代码，将细节放进元数据。</li>
</ul>
</li>
<li>类之间的耦合<ul>
<li>零耦合关系</li>
<li>具体耦合关系</li>
<li>抽象耦合关系</li>
</ul>
</li>
<li>依赖倒转原则要求客户端依赖于抽象耦合，以抽象方式耦合是依赖倒转原则的关键。</li>
<li>依赖注入<ul>
<li>构造注入：通过构造函数注入实例变量</li>
<li>设值注入：通过Setter方法注入实例变量</li>
<li>接口注入：通过接口方法注入实例变量</li>
</ul>
</li>
</ul>
<h3 id="3-依赖倒转原则实例"><a href="#3-依赖倒转原则实例" class="headerlink" title="3. 依赖倒转原则实例"></a>3. 依赖倒转原则实例</h3><ul>
<li>某系统提供一个数据转换模块，可以将来自不用数据源的数据转换成多种格式，如可以转换来自数据库的数据(DatabaseSource)，也可以转换来自文本文件的数据(TextSource),转换后的格式可以使XML文件(XML Transformer)，也可以是XLS文件(XLS Transformer)等。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>由于需求的变化，该系统可能需要增加新的数据源或者新的文件格式，每增加一个新的类型的数据源或者新的类型的文件格式，客户类MainClass都需要修改源代码，以便使用新的类，但违背了开闭原则。现使用依赖倒转原则对其进行重构。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="接口隔离原则"><a href="#接口隔离原则" class="headerlink" title="接口隔离原则"></a>接口隔离原则</h2><h3 id="1-接口隔离原则定义"><a href="#1-接口隔离原则定义" class="headerlink" title="1. 接口隔离原则定义"></a>1. 接口隔离原则定义</h3><ul>
<li>接口隔离原则的定义如下：客户端不应该依赖那些它不需要的接口。</li>
<li>注意，在该定义中的接口指的是所定义的方法。</li>
<li>另一种定义方法如下：一旦一个接口太大，则需要将它分割成一下更小的接口，使用该接口的客户端仅需知道与之相关的方法即可。</li>
</ul>
<h3 id="2-接口隔离原则分析"><a href="#2-接口隔离原则分析" class="headerlink" title="2. 接口隔离原则分析"></a>2. 接口隔离原则分析</h3><ul>
<li>接口隔离原则是指使用多个专门的接口，而不使用单一的总结口。每一个接口应该承担一种相对独立的角色，不多不少，不敢不该干的事，该干的事都要干。<ul>
<li>一个接口就只代表一个角色，每个角色都有它特定的一个接口，此时的原则可以叫做”角色隔离原则”。</li>
<li>接口仅仅提供客户端需要的行为，即所需的方法，客户端不需要的行为则隐藏起来，应当为客户端提供尽可能小的单独的接口，而不要提供大的总接口。</li>
</ul>
</li>
<li>使用接口隔离原则拆分接口时，首先必须满足单一职责原则，将一组相关的操作定义在一个接口中，且在满足高内聚的前提下，接口中的方法越少越好。</li>
<li>可以在进行系统设计时采用定制服务的方式，即为不同的客户端提供宽窄不同的接口，只提供客户需要的行为，而隐藏用户不需要的行为。</li>
</ul>
<h3 id="3-接口隔离原则实例"><a href="#3-接口隔离原则实例" class="headerlink" title="3. 接口隔离原则实例"></a>3. 接口隔离原则实例</h3><ul>
<li>实例说明：下图展示了一个拥有多个客户类的系统，在系统中定义了一个巨大的接⼝（胖接口）AbstractService来服务所有的客户类。可以使用接口隔离原则对其进行重构。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>现对该系统进行重构，使之满足接口隔离原则的要求。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="合成复用原则"><a href="#合成复用原则" class="headerlink" title="合成复用原则"></a>合成复用原则</h2><h3 id="1-合成复用原则定义"><a href="#1-合成复用原则定义" class="headerlink" title="1. 合成复用原则定义"></a>1. 合成复用原则定义</h3><ul>
<li>合成复用原则又称为组合/聚合原则，其定义如下：尽量使用对象组合，而不是继承来达到复用的目的。</li>
</ul>
<h3 id="2-合成复用原则分析"><a href="#2-合成复用原则分析" class="headerlink" title="2. 合成复用原则分析"></a>2. 合成复用原则分析</h3><ul>
<li>合成复用原则就是指在一个新的对象里通过关联关系(包括组合关系和聚合关系)来使用一些已有的对象，使之成为新对象的一部分。新对象通过委派调用已有对象的方法达到复用其已有功能的目的。简言之：要尽量使用组合/聚合关系，少用继承。</li>
<li>在面向对象设计中，可以通过两种基本方法在不同的环境中复用已有的设计和实现，即通过组合/聚合关系或通过继承。<ul>
<li>继承复用：实现简单，易于扩展。破坏系统的封装性。从基类继承而来的实现是静态的，不可能在运行时发生改变，没有足够的灵活性。只能在有限的环境中使用(“白箱”复用)。</li>
<li>组合/聚合复用：耦合度相对较低，选择性地调用成员对象的操作。可以在运行时动态进行(“黑箱”复用)。</li>
</ul>
</li>
<li>组合/聚合可以使系统更加灵活，类与类之间的耦合度降低，一个类的变化对其他类造成的影响相对较少，因此一般首选使用组合/聚合来实现复用，其次才考虑继承，在使用继承时，需要严格遵守里氏替换原则，有效使用继承会有助于问问题的理解，降低复杂度，而滥用继承反而会增加系统构建和维护的难度以及系统的复杂度，因此需要慎重使用继承复用。</li>
</ul>
<h3 id="3-合成复用原则实例"><a href="#3-合成复用原则实例" class="headerlink" title="3. 合成复用原则实例"></a>3. 合成复用原则实例</h3><ul>
<li>实例说明：某教学管理系统部分数据库访问类设计如图所示：</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99.png" alt=""></p>
<ul>
<li>如果需要更换数据库连接方式，如原来采用JDBC连接数据库，现在采用数据库连接池连接，则需要修改DBUtil类源代码。如果StudentDAO采用JDBC连接，但是TeacherDAO采用连接池连接，则需要增加一个新的DBUtil类，并修改StudentDAO或TeacherDAO的源代码，使之继承新的数据库连接类，这将违背开闭原则，系统扩展性较差。现使用合成复用原则对其进行重构。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%992.png" alt=""></p>
<h2 id="迪米特法则"><a href="#迪米特法则" class="headerlink" title="迪米特法则"></a>迪米特法则</h2><h3 id="迪米特法则定义"><a href="#迪米特法则定义" class="headerlink" title="迪米特法则定义"></a>迪米特法则定义</h3><ul>
<li>迪米特法则又称为最少知识原则，它有多种定义方法，其中几种典型定义如下：<ul>
<li>不要和”陌生人”说话</li>
<li>只与你的直接朋友通信</li>
<li>每一个软件单位对其他的单位都只有最少的知识，而且局限于那些与本单位密切相关的软件单位。</li>
</ul>
</li>
</ul>
<h3 id="2-迪米特法则分析"><a href="#2-迪米特法则分析" class="headerlink" title="2. 迪米特法则分析"></a>2. 迪米特法则分析</h3><ul>
<li>简单地说，迪米特法则就是指一个软件实体应当尽可能少的与其他实体发生相互作用。这样，当一个模块修改时，就会尽量少的影响其他的模块，扩展会相对容易，这是对软件实体之间通信的限制，它要求限制软件实体之间通信的宽度和深度。</li>
<li>在迪米特法则中，对于一个对象，其朋友包括以下几类：<ul>
<li>当前对象本身</li>
<li>以参数形式传入到当前对象方法中的对象</li>
<li>当前对象的成员对象</li>
<li>如果当前对象的成员对象是一个集合，那么集合中的元素也是朋友</li>
<li>当前朋友所创建的对象</li>
</ul>
</li>
<li>任何一个对象，如果满足上面的条件之一，就是当期对象的”朋友”，否则就是”陌生人”。</li>
<li>迪米特法则可分为狭义法则和广义法则。在狭义的迪米特法则中，如果两个类之间不必彼此直接通信，那么这两个类就不应当发生直接的相互作用，如果其中的一个类需要调用另一个类的某一个方法的话，可以通过第三者转发这个调用。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99.png" alt=""></p>
<ul>
<li>狭义的迪米特法则：可以降低类之间的耦合，但是会在系统中增加大量的小方法并散落在系统的各个角落，它可以使一个系统的局部设计简化，因为每一个局部都不会和远距离的对象有直接的关联，但是也会造成系统的不同模块之间的通信效率降低，使得系统的不同模块之间不容易协调。</li>
<li>广义的迪米特法则：指对对象之间的信息流量，流向以及信息的影响的控制，主要是对信息隐藏的控制。信息的隐藏可以使各个子系统之间脱耦，从而允许它们独立的被开发，优化，使用和修改，同时可以促进软件的复用，由于每一个模块都不依赖于其他模块的存在，因此每一个模块都可以独立地在其他的地方使用。一个系统的规模越大，信息的隐藏就越重要，而信息隐藏的重要性也就越明显。</li>
<li>迪米特法则的主要用途在于控制信息的过载：<ul>
<li>在类的划分上，应当尽量创建松耦合的类，类之间的耦合度越低，就越有利于复用，一个处在松耦中的类一旦被修改，不会对关联的类造成太大波及。</li>
<li>在类的结构设计上，每一个类都应当尽量降低其成员变量和成员函数的访问权限。</li>
<li>在类的设计上，只要有可能，一个类型应该设计成不变类。</li>
<li>在对其他类的引用上，一个对象对其他的引用应当降到最低。</li>
</ul>
</li>
</ul>
<h3 id="3-迪米特法则实例"><a href="#3-迪米特法则实例" class="headerlink" title="3. 迪米特法则实例"></a>3. 迪米特法则实例</h3><ul>
<li>实例说明：某系统界⾯类(如Form1、Form2等类)与数据访问类(如DAO1、DAO2等类)之间的调⽤关系较为复杂，如图所示：</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%992.png" alt=""></p>
<ul>
<li>现对该系统进行重构，使之满足迪米特法则的要求。</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%993.png" alt=""></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li>对于面向对象的软件系统设计来说，在支持可维护性的同时，需要提高系统的可复用性。</li>
<li>软件的复用可以提高软件的开发效率，提高软件质量，节约开发成本，恰当的复用还可以改善系统的可维护性。</li>
<li>单一职责原则要求在软件系统中，一个类只负责一个功能领域中的相应职责。</li>
<li>开闭原则要求一个软件实体应当对扩展开放，对修改关闭，即在不修改源代码的基础上扩展一个系统的行为。</li>
<li>里氏替换原则可以通俗表述为在软件中如果能够使用基类对象，那么一定能够使用其子类对象。</li>
<li>依赖倒转原则要求抽象不应该依赖于细节，细节应该依赖于抽象。要针对接口编程，不要针对实现编程。</li>
<li>接口隔离原则要求客户端不应该依赖那些它不需要的接口。即将一些大的接口细化成一些小的接口供客户端使用。</li>
<li>合成复用原则要求复用时尽量使用对象组合，而不使用继承。</li>
<li>迪米特法则要求一个软件实体应该尽可能少的与其他实体发生相互作用。</li>
</ul>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2017/12/02/Redis-Getting-Started-1/" style="float: left;">
        ← Redis 基础命令演示
    </a>
    
    
    <a class="pull-right" href="/2017/11/15/Web-Course/">
        面向Web的计算复习 →
    </a>
    
</nav>

        <div class="duoshuo">


</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
				<span id="busuanzi_container_site_pv">
					本站总访问量<span id="busuanzi_value_site_pv"></span>次
				</span>	
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Thpffcj.
                </p>
                <p>私は再び1日満たすためにあなたとの重要な人々を望みます</p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- ============================ END Footer =========================== -->

      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      (function(){
        console.log('font');
        var getCss = function(path) {
          var head = document.getElementsByTagName('head')[0];
          link = document.createElement('link');
          link.href = path;
          link.rel = 'stylesheet';
          link.type = 'text/css';
          head.appendChild(link);
        };
        getCss('https://fonts.googleapis.com/css?family=Montserrat:400,700');
        getCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
      })();
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
