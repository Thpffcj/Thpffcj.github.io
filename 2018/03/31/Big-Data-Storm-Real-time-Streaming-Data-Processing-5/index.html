<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>并行度 | Thpffcj的树洞</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Hexo">
    <meta name="author" content="John Doe">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close">
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            <li>
                <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/" target="_BLANK" class="animsition-link">AAA</a></li>
                    
                        <li><a href="/atom.xml" target="_BLANK" class="animsition-link">BBB</a></li>
                    
                </ul>
            </li>
            
            
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://domain.com/" class="animsition-link">Name</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">Thpffcj</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

</div>
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2018-03-31T10:18:42.000Z" itemprop="datePublished">
          2018-03-31
      </time>
    
    
    | 
    <a href="/tags/大数据/">大数据</a>
    
    
</span>
                <h1>并行度</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<ul>
<li>下面是这段时间系统了解Storm的一些记录<ul>
<li><a href="http://www.thpffcj.com/2018/03/05/Big-Data-Storm-Real-time-Streaming-Data-Processing-1/" target="_blank" rel="noopener">初识实时流处理Storm</a></li>
<li><a href="http://www.thpffcj.com/2018/03/18/Big-Data-Storm-Real-time-Streaming-Data-Processing-2/" target="_blank" rel="noopener">Storm编程</a></li>
<li><a href="http://www.thpffcj.com/2018/03/21/Big-Data-Storm-Real-time-Streaming-Data-Processing-3/" target="_blank" rel="noopener">Storm周边框架使用</a></li>
<li><a href="http://www.thpffcj.com/2018/03/29/Big-Data-Storm-Real-time-Streaming-Data-Processing-4/" target="_blank" rel="noopener">Storm架构及部署</a></li>
<li><a href="http://www.thpffcj.com/2018/03/31/Big-Data-Storm-Real-time-Streaming-Data-Processing-5/" target="_blank" rel="noopener">并行度</a></li>
<li><a href="http://www.thpffcj.com/2018/04/02/Big-Data-Storm-Real-time-Streaming-Data-Processing-6/" target="_blank" rel="noopener">分组策略与可靠性</a></li>
<li><a href="http://www.thpffcj.com/2018/04/06/Big-Data-Storm-Real-time-Streaming-Data-Processing-7/" target="_blank" rel="noopener">DRPC</a></li>
<li><a href="http://www.thpffcj.com/2018/04/07/Big-Data-Storm-Real-time-Streaming-Data-Processing-8/" target="_blank" rel="noopener">Storm整合其他大数据框架的使用</a></li>
<li><a href="http://www.thpffcj.com/2018/04/09/Big-Data-Storm-Real-time-Streaming-Data-Processing-9/" target="_blank" rel="noopener">Storm综合项目实战</a></li>
</ul>
</li>
</ul>
<p>通过前面的学习，我们已经基本掌握了Storm的基本使用，不过在进行Storm项目实战之前，我们再来看一下概念。这篇博客主要学习了并行度这个概念，使用”并行度”来说明在 Storm 拓扑中既可以配置 executor 的数量，也可以配置 worker 和 task 的数量，这是关于Storm调优的关键知识。</p>
<hr>
<h2 id="1-并行度"><a href="#1-并行度" class="headerlink" title="1. 并行度"></a>1. 并行度</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h3><ul>
<li>Storm distinguishes between the following three main entities that are used to actually run a topology in a Storm cluster:<ul>
<li>Worker processes</li>
<li>Executors (threads)</li>
<li>Tasks</li>
</ul>
</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%B9%B6%E8%A1%8C%E5%BA%A6.png" alt=""></p>
<ul>
<li>A worker process executes a subset of a topology. A worker process belongs to a specific topology and may run one or more executors for one or more components (spouts or bolts) of this topology. A running topology consists of many such processes running on many machines within a Storm cluster.</li>
<li>An executor is a thread that is spawned by a worker process. It may run one or more tasks for the same component (spout or bolt).</li>
<li>A task performs the actual data processing — each spout or bolt that you implement in your code executes as many tasks across the cluster. The number of tasks for a component is always the same throughout the lifetime of a topology, but the number of executors (threads) for a component can change over time. This means that the following condition holds true: #threads ≤ #tasks. By default, the number of tasks is set to be the same as the number of executors, i.e. Storm will run one task per thread.</li>
<li>一个worker进程执行的是一个topo的子集</li>
<li>一个worker进程会启动1..n个executor线程来执行一个topo的component</li>
<li>一个运行的topo就是由集群中多台物理机上的多个worker进程组成</li>
<li>executor是一个被worker进程启动的单独线程，每个executor只会运行1个topo的一个component</li>
<li>task是最终运行spout或bolt代码的最小执行单元</li>
<li>默认：<ul>
<li>一个supervisor节点最多启动4个worker进程</li>
<li>每一个topo默认占用一个worker进程</li>
<li>每个worker进程会启动一个executor</li>
<li>每个executor启动一个task</li>
</ul>
</li>
</ul>
<h3 id="2-Storm作业运行UI页面上的参数详解"><a href="#2-Storm作业运行UI页面上的参数详解" class="headerlink" title="2. Storm作业运行UI页面上的参数详解"></a>2. Storm作业运行UI页面上的参数详解</h3><ul>
<li>启动storm</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ nohup sh storm dev-zookeeper &amp;
[1] 3858
[thpffcj@thpffcj bin]$ nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;
[thpffcj@thpffcj bin]$ nohup sh storm nimbus &amp;
[2] 3920
nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;
[thpffcj@thpffcj bin]$ nohup sh storm supervisor &amp;
[3] 3999
nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;
[thpffcj@thpffcj bin]$ nohup sh storm ui &amp;
[4] 4030
nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;
[thpffcj@thpffcj bin]$ nohup sh storm logviewer &amp;
[5] 4125
nohup: 忽略输入并把输出追加到&quot;nohup.out&quot;

[thpffcj@thpffcj bin]$ jps -l
3920 org.apache.storm.daemon.nimbus
3858 org.apache.storm.command.dev_zookeeper
4343 sun.tools.jps.Jps
4125 org.apache.storm.daemon.logviewer
4030 org.apache.storm.ui.core
3999 org.apache.storm.daemon.supervisor.Supervisor
</code></pre><ul>
<li>先把我们前面的求和作业运行起来</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ storm jar /home/thpffcj/lib/storm-1.0.jar cn.edu.nju.ClusterSumStormTopology
...
1551 [main] INFO  o.a.s.StormSubmitter - Finished submitting topology: ClusterSumStormTopology
</code></pre><ul>
<li>我们去UI界面(<a href="http://192.168.92.130:8080)查看情况" target="_blank" rel="noopener">http://192.168.92.130:8080)查看情况</a><ul>
<li>Total slots：4</li>
<li>Used slots：1</li>
<li>Executors：3 ? spout + bolt = 2 <ul>
<li>acker导致的</li>
</ul>
</li>
<li>Tasks：3</li>
</ul>
</li>
</ul>
<p><br></p>
<hr>
<h2 id="2-并行度调整"><a href="#2-并行度调整" class="headerlink" title="2. 并行度调整"></a>2. 并行度调整</h2><h3 id="1-worker设置"><a href="#1-worker设置" class="headerlink" title="1. worker设置"></a>1. worker设置</h3><ul>
<li>Number of worker processes<ul>
<li>Description: How many worker processes to create for the topology across machines in the cluster.</li>
<li>Configuration option: TOPOLOGY_WORKERS</li>
<li>How to set in your code (examples):<br>Config#setNumWorkers</li>
</ul>
</li>
</ul>
<pre><code>public static void main(String[] args) {

    // TopologyBuilder根据Spout和Bolt来构建出Topology
    // Storm中任何一个作业都是通过Topology的方式进行提交的
    // Topology中需要指定Spout和Bolt的执行顺序
    TopologyBuilder builder = new TopologyBuilder();
    builder.setSpout(&quot;DataSourceSpout&quot;, new DataSourceSpout());
    builder.setBolt(&quot;SumBolt&quot;, new SumBolt()).shuffleGrouping(&quot;DataSourceSpout&quot;);

    // 代码提交到Storm集群上运行
    String topoName = ClusterSumStormWorkersTopology.class.getSimpleName();
    try {
        Config config = new Config();
        config.setNumWorkers(2);
        config.setNumAckers(0);
        StormSubmitter.submitTopology(topoName, config, builder.createTopology());
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre><ul>
<li>现在这个代码相当于已经改完了，现在就需要编译打包运行</li>
<li>到控制台执行storm jar命令</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ storm jar /home/thpffcj/lib/storm-1.0.jar cn.edu.nju.ClusterSumStormWorkersTopology
... 
1696 [main] INFO  o.a.s.StormSubmitter - Finished submitting topology: ClusterSumStormWorkersTopology
</code></pre><ul>
<li>到UI界面查看</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/worker%E8%B0%83%E6%95%B4.png" alt=""></p>
<ul>
<li>我们使用了两个slot，两个worker</li>
<li>我们发现有两个executor两个task，是因为我们前面关闭了ack</li>
</ul>
<h3 id="2-executor设置"><a href="#2-executor设置" class="headerlink" title="2. executor设置"></a>2. executor设置</h3><ul>
<li>Number of executors (threads)<ul>
<li>Description: How many executors to spawn per component.</li>
<li>Configuration option: None (pass parallelism_hint parameter to setSpout or setBolt)</li>
<li>How to set in your code (examples):<ul>
<li>TopologyBuilder#setSpout()</li>
<li>TopologyBuilder#setBolt()</li>
<li>Note that as of Storm 0.8 the parallelism_hint parameter now specifies the initial number of executors (not tasks!) for that bolt.</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>/**
 * Define a new spout in this topology with the specified parallelism. If the spout declares
 * itself as non-distributed, the parallelism_hint will be ignored and only one task
 * will be allocated to this component.
 *
 * @param id the id of this component. This id is referenced by other components that want to consume this spout&apos;s outputs.
 * @param parallelism_hint the number of tasks that should be assigned to execute this spout. Each task will run on a thread in a process somewhere around the cluster.
 * @param spout the spout
 * @throws IllegalArgumentException if {@code parallelism_hint} is not positive
 */
public SpoutDeclarer setSpout(String id, IRichSpout spout, Number parallelism_hint) throws IllegalArgumentException {
    validateUnusedId(id);
    initCommon(id, spout, parallelism_hint);
    _spouts.put(id, spout);
    return new SpoutGetter(id);
}
</code></pre><ul>
<li>我们直接在创建时就可以设置并行度</li>
</ul>
<pre><code>public static void main(String[] args) {

    // TopologyBuilder根据Spout和Bolt来构建出Topology
    // Storm中任何一个作业都是通过Topology的方式进行提交的
    // Topology中需要指定Spout和Bolt的执行顺序
    TopologyBuilder builder = new TopologyBuilder();
    builder.setSpout(&quot;DataSourceSpout&quot;, new DataSourceSpout(), 2);
    builder.setBolt(&quot;SumBolt&quot;, new SumBolt(), 2).shuffleGrouping(&quot;DataSourceSpout&quot;);

    // 代码提交到Storm集群上运行
    String topoName = ClusterSumStormExecutorsTopology.class.getSimpleName();
    try {
        Config config = new Config();
        config.setNumWorkers(2);
        config.setNumAckers(0);
        StormSubmitter.submitTopology(topoName, config, builder.createTopology());
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre><ul>
<li>编译打包到虚拟机执行</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ storm jar /home/thpffcj/lib/storm-1.0.jar cn.edu.nju.ClusterSumStormExecutorsTopology
...
1315 [main] INFO  o.a.s.StormSubmitter - Finished submitting topology: ClusterSumStormExecutorsTopology
</code></pre><p><img src="http://oseihavwm.bkt.clouddn.com/executor%E8%AE%BE%E7%BD%AE.png" alt=""></p>
<ul>
<li>依然用掉了两个slot，worker的数量为2</li>
<li>executor的数量和task的数量为4，我们我们设置了spout和blot的并行度为2</li>
</ul>
<h3 id="3-task设置"><a href="#3-task设置" class="headerlink" title="3. task设置"></a>3. task设置</h3><ul>
<li>Number of tasks<ul>
<li>Description: How many tasks to create per component.</li>
<li>Configuration option: TOPOLOGY_TASKS<ul>
<li>How to set in your code (examples):</li>
<li>ComponentConfigurationDeclarer#setNumTasks()</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>public static void main(String[] args) {

    // TopologyBuilder根据Spout和Bolt来构建出Topology
    // Storm中任何一个作业都是通过Topology的方式进行提交的
    // Topology中需要指定Spout和Bolt的执行顺序
    TopologyBuilder builder = new TopologyBuilder();
    builder.setSpout(&quot;DataSourceSpout&quot;, new DataSourceSpout(), 2);
    builder.setBolt(&quot;SumBolt&quot;, new SumBolt(), 2)
            .setNumTasks(4)
            .shuffleGrouping(&quot;DataSourceSpout&quot;);

    // 代码提交到Storm集群上运行
    String topoName = ClusterSumStormTasksTopology.class.getSimpleName();
    try {
        Config config = new Config();
        config.setNumWorkers(2);
        config.setNumAckers(0);
        StormSubmitter.submitTopology(topoName, config, builder.createTopology());
    } catch (Exception e) {
        e.printStackTrace();
    }
</code></pre><ul>
<li>设置task的数量为4，编译打包</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ storm jar /home/thpffcj/lib/storm-1.0.jar cn.edu.nju.ClusterSumStormTasksTopology
...
1258 [main] INFO  o.a.s.StormSubmitter - Finished submitting topology: ClusterSumStormTasksTopology
</code></pre><ul>
<li>可以看到executor数量依然是4，但是task的数量变成了6</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/task%E8%AE%BE%E7%BD%AE.png" alt=""></p>
<h3 id="4-ack设置"><a href="#4-ack设置" class="headerlink" title="4. ack设置"></a>4. ack设置</h3><ul>
<li>我们只需要将设置ack的地方去掉</li>
</ul>
<pre><code>public static void main(String[] args) {

    // TopologyBuilder根据Spout和Bolt来构建出Topology
    // Storm中任何一个作业都是通过Topology的方式进行提交的
    // Topology中需要指定Spout和Bolt的执行顺序
    TopologyBuilder builder = new TopologyBuilder();
    builder.setSpout(&quot;DataSourceSpout&quot;, new DataSourceSpout(), 2);
    builder.setBolt(&quot;SumBolt&quot;, new SumBolt(), 2).shuffleGrouping(&quot;DataSourceSpout&quot;);

    // 代码提交到Storm集群上运行
    String topoName = ClusterSumStormAckerTopology.class.getSimpleName();
    try {
        Config config = new Config();
        config.setNumWorkers(2);
        StormSubmitter.submitTopology(topoName, config, builder.createTopology());
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre><ul>
<li>打包编译运行</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ storm jar /home/thpffcj/lib/storm-1.0.jar cn.edu.nju.ClusterSumStormAckerTopology
...
1387 [main] INFO  o.a.s.StormSubmitter - Finished submitting topology: ClusterSumStormAckerTopology
</code></pre><p><img src="http://oseihavwm.bkt.clouddn.com/ack%E8%AE%BE%E7%BD%AE.png" alt=""></p>
<ul>
<li>Used slots：2</li>
<li>Executors：6(比上面多了两个ack)</li>
<li>Tasks：8</li>
</ul>
<h3 id="5-并行度案例分析"><a href="#5-并行度案例分析" class="headerlink" title="5. 并行度案例分析"></a>5. 并行度案例分析</h3><ul>
<li>The following illustration shows how a simple topology would look like in operation. The topology consists of three components: one spout called BlueSpout and two bolts called GreenBolt and YellowBolt. The components are linked such that BlueSpout sends its output to GreenBolt, which in turns sends its own output to YellowBolt.</li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/%E5%B9%B6%E8%A1%8C%E5%BA%A6%E6%A1%88%E4%BE%8B.png" alt=""></p>
<pre><code>Config conf = new Config();
conf.setNumWorkers(2); // use two worker processes

topologyBuilder.setSpout(&quot;blue-spout&quot;, new BlueSpout(), 2); // set parallelism hint to 2

topologyBuilder.setBolt(&quot;green-bolt&quot;, new GreenBolt(), 2)
               .setNumTasks(4)
               .shuffleGrouping(&quot;blue-spout&quot;);

topologyBuilder.setBolt(&quot;yellow-bolt&quot;, new YellowBolt(), 6)
               .shuffleGrouping(&quot;green-bolt&quot;);

StormSubmitter.submitTopology(
        &quot;mytopology&quot;,
        conf,
        topologyBuilder.createTopology()
    );
</code></pre><p><strong>How to change the parallelism of a running topology</strong></p>
<ul>
<li>A nifty feature of Storm is that you can increase or decrease the number of worker processes and/or executors without being required to restart the cluster or the topology. The act of doing so is called rebalancing.</li>
<li>You have two options to rebalance a topology:<ul>
<li>Use the Storm web UI to rebalance the topology.</li>
<li>Use the CLI tool storm rebalance as described below.</li>
</ul>
</li>
<li>Here is an example of using the CLI tool:</li>
</ul>
<pre><code>## Reconfigure the topology &quot;mytopology&quot; to use 5 worker processes,
## the spout &quot;blue-spout&quot; to use 3 executors and
## the bolt &quot;yellow-bolt&quot; to use 10 executors.

$ storm rebalance mytopology -n 5 -e blue-spout=3 -e yellow-bolt=10
</code></pre><p><strong>rebalance</strong></p>
<ul>
<li>Syntax: storm rebalance topology-name [-w wait-time-secs] [-n new-num-workers] [-e component=parallelism]*</li>
<li>Sometimes you may wish to spread out where the workers for a topology are running. For example, let’s say you have a 10 node cluster running 4 workers per node, and then let’s say you add another 10 nodes to the cluster. You may wish to have Storm spread out the workers for the running topology so that each node runs 2 workers. One way to do this is to kill the topology and resubmit it, but Storm provides a “rebalance” command that provides an easier way to do this.</li>
<li>Rebalance will first deactivate the topology for the duration of the message timeout (overridable with the -w flag) and then redistribute the workers evenly around the cluster. The topology will then return to its previous state of activation (so a deactivated topology will still be deactivated and an activated topology will go back to being activated).</li>
<li>The rebalance command can also be used to change the parallelism of a running topology. Use the -n and -e switches to change the number of workers or number of executors of a component respectively.</li>
</ul>

            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2018/04/02/Big-Data-Storm-Real-time-Streaming-Data-Processing-6/" style="float: left;">
        ← 分组策略与可靠性
    </a>
    
    
    <a class="pull-right" href="/2018/03/29/Big-Data-Storm-Real-time-Streaming-Data-Processing-4/">
        Storm架构及部署 →
    </a>
    
</nav>

        <div class="duoshuo">


</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
				<span id="busuanzi_container_site_pv">
					本站总访问量<span id="busuanzi_value_site_pv"></span>次
				</span>	
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Thpffcj.
                </p>
                <p>私は再び1日満たすためにあなたとの重要な人々を望みます</p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- ============================ END Footer =========================== -->

      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      (function(){
        console.log('font');
        var getCss = function(path) {
          var head = document.getElementsByTagName('head')[0];
          link = document.createElement('link');
          link.href = path;
          link.rel = 'stylesheet';
          link.type = 'text/css';
          head.appendChild(link);
        };
        getCss('https://fonts.googleapis.com/css?family=Montserrat:400,700');
        getCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
      })();
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
