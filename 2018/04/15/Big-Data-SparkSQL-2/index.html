<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>Spark及其生态圈 | Thpffcj的树洞</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Hexo">
    <meta name="author" content="John Doe">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.ico" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close">
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">Home</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">archives</a></li>
            <!-- Dropdown Menu -->
			 
            <li>
                <a class="sb-toggle-submenu">Works<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                        <li><a href="/" target="_BLANK" class="animsition-link">AAA</a></li>
                    
                        <li><a href="/atom.xml" target="_BLANK" class="animsition-link">BBB</a></li>
                    
                </ul>
            </li>
            
            
            
            <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://domain.com/" class="animsition-link">Name</a></li>
                    
                </ul>
            </li>
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                         <img src="/img/logo.png" alt="Logo" width="35px;"> 
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">Thpffcj</a></li>
                            <li class="nolink"><span>Always </span>Creative.</li>
                            
                            <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a></li>
                            
                            
                            <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a></li>
                            
                            
                            <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a></li>
                            
                            
                            <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

</div>
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2018-04-15T01:42:43.000Z" itemprop="datePublished">
          2018-04-15
      </time>
    
    
    | 
    <a href="/tags/大数据/">大数据</a>
    
    
</span>
                <h1>Spark及其生态圈</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h2 id="1-Spark-概述及特点"><a href="#1-Spark-概述及特点" class="headerlink" title="1. Spark 概述及特点"></a>1. Spark 概述及特点</h2><h3 id="1-Spark-特点"><a href="#1-Spark-特点" class="headerlink" title="1. Spark 特点"></a>1. Spark 特点</h3><ul>
<li><strong><a href="http://spark.apache.org/" target="_blank" rel="noopener">Spark - Lightning-fast unified analytics engine</a></strong></li>
<li>Apache Spark is a unified analytics engine for large-scale data processing.</li>
<li>Speed<ul>
<li>Run workloads 100x faster.</li>
<li>Apache Spark achieves high performance for both batch and streaming data, using a state-of-the-art DAG scheduler, a query optimizer, and a physical execution engine.</li>
</ul>
</li>
<li>Ease of Use<ul>
<li>Write applications quickly in Java, Scala, Python, R, and SQL.</li>
<li>Spark offers over 80 high-level operators that make it easy to build parallel apps. And you can use it interactively from the Scala, Python, R, and SQL shells.</li>
</ul>
</li>
<li>Generality<ul>
<li>Combine SQL, streaming, and complex analytics.</li>
<li>Spark powers a stack of libraries including SQL and DataFrames, MLlib for machine learning, GraphX, and Spark Streaming. You can combine these libraries seamlessly in the same application.</li>
</ul>
</li>
<li>Runs Everywhere<ul>
<li>Spark runs on Hadoop, Apache Mesos, Kubernetes, standalone, or in the cloud. It can access diverse data sources.</li>
<li>You can run Spark using its standalone cluster mode, on EC2, on Hadoop YARN, on Mesos, or on Kubernetes. Access data in HDFS, Apache Cassandra, Apache HBase, Apache Hive, and hundreds of other data sources.</li>
</ul>
</li>
</ul>
<h3 id="2-Spark-产生背景"><a href="#2-Spark-产生背景" class="headerlink" title="2. Spark 产生背景"></a>2. Spark 产生背景</h3><ul>
<li>MapReduce局限性<ul>
<li>代码繁琐</li>
<li>只能够支持map和reduce方法</li>
<li>执行效率低下</li>
<li>不适合迭代多次，交互式，流式的处理</li>
</ul>
</li>
<li>框架多样化<ul>
<li>批处理(离线)：MapReduce，Hive，Pig</li>
<li>流式处理(实时)： Storm，JStorm</li>
<li>交互式计算：Impala</li>
</ul>
</li>
</ul>
<h3 id="3-Spark-发展历史"><a href="#3-Spark-发展历史" class="headerlink" title="3. Spark 发展历史"></a>3. Spark 发展历史</h3><ul>
<li>2010 start</li>
<li>2013 Databricks started &amp; donated to ASF</li>
<li>2014 Spark1.0 &amp; libraries(SQL,ML,Graphx)</li>
<li>2015 DataFrames, Tungsten, ML Pipelines</li>
<li>2016 Spark 2.0</li>
</ul>
<h3 id="4-Spark-对比-Hadoop"><a href="#4-Spark-对比-Hadoop" class="headerlink" title="4. Spark 对比 Hadoop"></a>4. Spark 对比 Hadoop</h3><ul>
<li>Hadoop生态系统</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Thpffcj/Thpffcj.github.io/master/picture/Big-Data-SparkSQL/Hadoop%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.png" alt=""></p>
<ul>
<li>Spark生态系统：BDAS</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Thpffcj/Thpffcj.github.io/master/picture/Big-Data-SparkSQL/Spark%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F.png" alt=""></p>
<h3 id="5-Spark-和-Hadoop-的协作性"><a href="#5-Spark-和-Hadoop-的协作性" class="headerlink" title="5. Spark 和 Hadoop 的协作性"></a>5. Spark 和 Hadoop 的协作性</h3><ul>
<li>Hadoop的优势<ul>
<li>Unlimited Scale</li>
<li>Enterprise Platform</li>
<li>Wide Range Of Applications</li>
</ul>
</li>
<li>Spark的优势<ul>
<li>Ease Of Development</li>
<li>In-Memory Performance</li>
<li>Combine Workflows</li>
</ul>
</li>
</ul>
<p><br></p>
<hr>
<h2 id="2-实战环境搭建"><a href="#2-实战环境搭建" class="headerlink" title="2. 实战环境搭建"></a>2. 实战环境搭建</h2><h3 id="1-Spark源码编译"><a href="#1-Spark源码编译" class="headerlink" title="1. Spark源码编译"></a>1. Spark源码编译</h3><ul>
<li><strong><a href="http://spark.apache.org/docs/2.2.0/building-spark.html" target="_blank" rel="noopener">Building Spark</a></strong></li>
<li>在官网上下载Spark源码</li>
<li>编译前置要求：<ul>
<li>The Maven-based build is the build of reference for Apache Spark. Building Spark using Maven requires Maven 3.3.9 or newer and Java 8+. </li>
<li>export MAVEN_OPTS=”-Xmx2g -XX:ReservedCodeCacheSize=512m”</li>
</ul>
</li>
</ul>
<p><strong>mvn编译命令</strong></p>
<ul>
<li>./build/mvn -Pyarn -Phadoop-2.6 -Phive -Phive-thriftserver -Dhadoop.version=2.6.0-cdh5.7.0 -DskipTests clean package</li>
</ul>
<p><strong>Building a Runnable Distribution</strong></p>
<ul>
<li>./dev/make-distribution.sh –name custom-spark –tgz -Psparkr -Phadoop-2.4 -Phive -Phive-thriftserver -Pmesos -Pyarn</li>
<li>参数说明：<ul>
<li>name：指定编译完成后Spark安装包的名字</li>
<li>tgz：以tgz的方式进行压缩</li>
<li>Psparkr：编译出来的Spark支持R语言</li>
<li>Phadoop-2.4：以hadoop-2.4的profile进行编译，具体的profile可以看出源码根目录中的pom.xml中查看</li>
<li>Phive和-Phive-thriftserver：编译出来的Spark支持对Hive的操作</li>
<li>Pmesos：编译出来的Spark支持运行在Mesos上</li>
<li>Pyarn：编译出来的Spark支持运行在YARN上</li>
</ul>
</li>
<li>根据我们的hadoop版本，我们需要的命令是/dev/make-distribution.sh –name 2.6.0-cdh5.7.0 –tgz -Pyarn -Phadoop-2.6 -Phive -Phive-thriftserver -Dhadoop.version=2.6.0-cdh5.7.0</li>
</ul>
<p><strong>Spark源码编译中的坑</strong></p>
<ul>
<li>编译过程中，发现找不到包</li>
</ul>
<pre><code>[ERROR] Failed to execute goal on project spark-launcher_2.11: Could not resolve dependencies for project org.apache.spark:spark-launcher_2.11:jar:2.2.0: Failure to find org.apache.hadoop:hadoop-client:jar:2.6.0-cdh5.7.0 in https://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &lt;goals&gt; -rf :spark-launcher_2.11
</code></pre><ul>
<li>这是因为默认的是apache的仓库，但是我们hadoop的版本写的是CDH，这时要将CDH的仓库配进来，打开spark目录下的pom.xml文件，将CDH的仓库配进去</li>
</ul>
<pre><code>&lt;repository&gt;
    &lt;id&gt;cloudera&lt;/id&gt;
    &lt;name&gt;cloudera Repository&lt;/name&gt;
    &lt;url&gt;https://repository.cloudera.com/artifactory/cloudera-repos&lt;/url&gt;
&lt;/repository&gt;
</code></pre><ul>
<li>接续执行./dev/make-distribution.sh –name 2.6.0-cdh5.7.0 –tgz -Pyarn -Phadoop-2.6 -Phive -Phive-thriftserver -Dhadoop.version=2.6.0-cdh5.7.0</li>
</ul>
<p><strong>如果在编译过程中，你看到的异常信息不是太明显/看不太懂，编译命令后 -X，就能看到更详细的编译信息</strong></p>
<h3 id="2-Spark环境搭建"><a href="#2-Spark环境搭建" class="headerlink" title="2. Spark环境搭建"></a>2. Spark环境搭建</h3><ul>
<li>在spark根目录我们得到spark-2.2.0-bin-2.6.0-cdh5.7.0.tgz，解压，添加环境变量</li>
</ul>
<pre><code>[thpffcj@thpffcj software]$ tar -zxvf spark-2.2.0-bin-2.6.0-cdh5.7.0.tgz -C ~/app/

[thpffcj@thpffcj spark-2.2.0-bin-2.6.0-cdh5.7.0]$ vi ~/.bash_profile 

export SPARK_HOME=/home/thpffcj/app/spark-2.2.0-bin-2.6.0-cdh5.7.0
export PATH=$SPARK_HOME/bin:$PATH

[thpffcj@thpffcj spark-2.2.0-bin-2.6.0-cdh5.7.0]$ source ~/.bash_profile 
</code></pre><p><strong>local模式</strong></p>
<pre><code>[thpffcj@thpffcj bin]$ spark-shell --master local[2]
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties
Setting default log level to &quot;WARN&quot;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
18/04/26 20:05:49 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
18/04/26 20:06:00 WARN ObjectStore: Failed to get database global_temp, returning NoSuchObjectException
Spark context Web UI available at http://192.168.92.130:4040
Spark context available as &apos;sc&apos; (master = local[2], app id = local-1524744351118).
Spark session available as &apos;spark&apos;.
Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &apos;_/
   /___/ .__/\_,_/_/ /_/\_\   version 2.2.0
      /_/

Using Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_151)
Type in expressions to have them evaluated.
Type :help for more information.
</code></pre><p><strong>standalone模式</strong></p>
<ul>
<li>Spark Standalone模式的架构和Hadoop HDFS/YARN很类似的<ul>
<li>1 master + n worker</li>
</ul>
</li>
</ul>
<ul>
<li>修改spark-env.sh</li>
</ul>
<pre><code>[thpffcj@thpffcj conf]$ cp spark-env.sh.template spark-env.sh
[thpffcj@thpffcj conf]$ vi spark-env.sh


export JAVA_HOME=/home/thpffcj/app/jdk1.8.0_151

SPARK_MASTER_HOST=thpffcj
SPARK_WORKER_CORES=2
SPARK_WORKER_MEMORY=2g
</code></pre><ul>
<li>启动所有节点</li>
</ul>
<pre><code>[thpffcj@thpffcj sbin]$ ./start-all.sh 
starting org.apache.spark.deploy.master.Master, logging to /home/thpffcj/app/spark-2.2.0-bin-2.6.0-cdh5.7.0/logs/spark-thpffcj-org.apache.spark.deploy.master.Master-1-thpffcj.out
localhost: starting org.apache.spark.deploy.worker.Worker, logging to /home/thpffcj/app/spark-2.2.0-bin-2.6.0-cdh5.7.0/logs/spark-thpffcj-org.apache.spark.deploy.worker.Worker-1-thpffcj.out
</code></pre><ul>
<li>启动spark</li>
</ul>
<pre><code>[thpffcj@thpffcj bin]$ spark-shell --master spark://thpffcj:7077
Using Spark&apos;s default log4j profile: org/apache/spark/log4j-defaults.properties
Setting default log level to &quot;WARN&quot;.
To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).
18/04/26 20:32:19 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
18/04/26 20:32:35 WARN ObjectStore: Failed to get database global_temp, returning NoSuchObjectException
Spark context Web UI available at http://192.168.92.130:4040
Spark context available as &apos;sc&apos; (master = spark://thpffcj:7077, app id = app-20180426203222-0000).
Spark session available as &apos;spark&apos;.
Welcome to
      ____              __
     / __/__  ___ _____/ /__
    _\ \/ _ \/ _ `/ __/  &apos;_/
   /___/ .__/\_,_/_/ /_/\_\   version 2.2.0
      /_/

Using Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_151)
Type in expressions to have them evaluated.
Type :help for more information.
</code></pre><ul>
<li>我们可以到<a href="http://192.168.92.130:8080/使用WebUI查看情况" target="_blank" rel="noopener">http://192.168.92.130:8080/使用WebUI查看情况</a></li>
</ul>
<p><img src="http://oseihavwm.bkt.clouddn.com/Spark%20Standalone%E6%A8%A1%E5%BC%8F.png" alt=""></p>
<h3 id="3-Spark简单使用"><a href="#3-Spark简单使用" class="headerlink" title="3. Spark简单使用"></a>3. Spark简单使用</h3><ul>
<li>使用Spark完成wordcount统计</li>
<li>读取文件并输入</li>
</ul>
<pre><code>scala&gt; val file = sc.textFile(&quot;file:///home/thpffcj/data/hello.txt&quot;)
file: org.apache.spark.rdd.RDD[String] = file:///home/thpffcj/data/hello.txt MapPartitionsRDD[1] at textFile at &lt;console&gt;:24

scala&gt; file.collect
res0: Array[String] = Array(hadoop welcome, hadoop hdfs mapreduce, hadoop hdfs)
</code></pre><ul>
<li>现在我们来实现wordcount</li>
</ul>
<pre><code>scala&gt; var a = file.flatMap(line =&gt; line.split(&quot; &quot;))
a: org.apache.spark.rdd.RDD[String] = MapPartitionsRDD[2] at flatMap at &lt;console&gt;:26

scala&gt; a.collect
res1: Array[String] = Array(hadoop, welcome, hadoop, hdfs, mapreduce, hadoop, hdfs)

scala&gt; var b = a.map(word =&gt; (word, 1))
b: org.apache.spark.rdd.RDD[(String, Int)] = MapPartitionsRDD[3] at map at &lt;console&gt;:28

scala&gt; b.collect
res3: Array[(String, Int)] = Array((hadoop,1), (welcome,1), (hadoop,1), (hdfs,1), (mapreduce,1), (hadoop,1), (hdfs,1))

scala&gt; var c = b.reduceByKey(_ + _)
c: org.apache.spark.rdd.RDD[(String, Int)] = ShuffledRDD[4] at reduceByKey at &lt;console&gt;:30

scala&gt; c.collect
res4: Array[(String, Int)] = Array((mapreduce,1), (welcome,1), (hadoop,3), (hdfs,2)).reduceByKey(_ + _)
</code></pre><ul>
<li>使用方法链</li>
</ul>
<pre><code>scala&gt; sc.textFile(&quot;file:///home/thpffcj/data/hello.txt&quot;).flatMap(line =&gt; line.split(&quot; &quot;)).map(word =&gt; (word, 1)).reduceByKey(_ + _).collect
res6: Array[(String, Int)] = Array((mapreduce,1), (welcome,1), (hadoop,3), (hdfs,2))
</code></pre>
            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2018/04/15/Big-Data-Interview/" style="float: left;">
        ← 大数据面试
    </a>
    
    
    <a class="pull-right" href="/2018/04/14/Big-Data-SparkSQL-1/">
        初探大数据 →
    </a>
    
</nav>

        <div class="duoshuo">


</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
				<span id="busuanzi_container_site_pv">
					本站总访问量<span id="busuanzi_value_site_pv"></span>次
				</span>	
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By Thpffcj.
                </p>
                <p>私は再び1日満たすためにあなたとの重要な人々を望みます</p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://twitter.com/" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://www.facebook.com/" title="Facebook" target="_blank"><i class="icon-facebook"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="https://google.com/" title="Google-Plus" target="_blank"><i class="icon-google-plus"></i></a>&nbsp;</li>
                    
                    
                    <li><a href="http://weibo.com/" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- ============================ END Footer =========================== -->

      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      (function(){
        console.log('font');
        var getCss = function(path) {
          var head = document.getElementsByTagName('head')[0];
          link = document.createElement('link');
          link.href = path;
          link.rel = 'stylesheet';
          link.type = 'text/css';
          head.appendChild(link);
        };
        getCss('https://fonts.googleapis.com/css?family=Montserrat:400,700');
        getCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
      })();
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
